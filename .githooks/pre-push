#!/bin/bash
# Pre-push hook: run tests before pushing

set -e

echo "Running tests before push..."

# Use nextest if available, otherwise cargo test
if command -v cargo-nextest &> /dev/null; then
    cargo nextest run
else
    cargo test
fi

if [ $? -ne 0 ]; then
    echo "❌ Tests failed. Fix failing tests before pushing."
    exit 1
fi

echo "✓ All tests passed, pushing..."
